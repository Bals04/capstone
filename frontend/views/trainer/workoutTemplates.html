<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Templates</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="../../dist/tailwind.css">
</head>

<body class="bg-gray-100 p-6">
    <div class="container mx-auto">
        <h1 class="text-3xl font-bold text-orange-700 mb-6">Workout Templates</h1>
        <div class="bg-white shadow-md rounded-lg p-4 mb-6">
            <h2 class="text-2xl font-bold text-orange-700 mb-4">Your Templates</h2>
            <button id="createTemplateBtn"
                class="bg-orange-700 text-white font-bold py-1 px-3 rounded hover:bg-orange-800 mb-4 flex items-center">
                <i class="fas fa-plus mr-2"></i> Create Template
            </button>
            <div id="templatesList" class="space-y-4">
                <!-- List of workout templates will go here -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="templateModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
            <h2 class="text-2xl font-bold text-orange-700 mb-4">Create Template</h2>
            <form id="templateForm">
                <div class="mb-4">
                    <label for="templateName" class="block text-gray-700 font-bold mb-2">Template Name</label>
                    <input type="text" id="templateName"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        required>
                </div>
                <div class="mb-4">
                    <label for="templateDescription" class="block text-gray-700 font-bold mb-2">Template
                        Description</label>
                    <textarea id="templateDescription"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        required></textarea>
                </div>
                <div class="flex justify-end">
                    <button type="button" id="closeModalBtn"
                        class="bg-gray-300 text-gray-700 font-bold py-1 px-3 rounded mr-2 hover:bg-gray-400">Cancel</button>
                    <button type="submit"
                        class="bg-orange-700 text-white font-bold py-1 px-3 rounded hover:bg-orange-800">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script>

        document.getElementById('createTemplateBtn').addEventListener('click', function () {
            document.getElementById('templateModal').classList.remove('hidden');
        });

        document.getElementById('closeModalBtn').addEventListener('click', function () {
            document.getElementById('templateModal').classList.add('hidden');
        });

        document.getElementById('templateForm').addEventListener('submit', async function (event) {
            event.preventDefault();
            try {
                var template_name = document.getElementById("templateName").value;
                var description = document.getElementById("templateDescription").value;
                const formData = {
                    trainer_id: 1,
                    name: template_name,
                    desc: description,

                };
                const response = await axios.post('http://localhost:3000/addTemplates', formData);
                console.log(response.status);
                console.log('Form submitted successfully!', response.data);
                alert(`Template successfully added!`)
                populateTemplates();
                document.getElementById('templateModal').classList.add('hidden');

            } catch (error) {
                console.log("shet error ka")
                console.error('Error submitting form:', error);
            }
            document.getElementById('templateModal').classList.add('hidden');
        });

        populateTemplates();
        async function populateTemplates() {
            var templateList = document.getElementById("templatesList");
            var userMarker = null;
            templateList.innerHTML = "";

            try {
                const response = await axios.get('http://localhost:3000/getTemplates');
                const data = response.data;
                const tableBody = document.getElementById('data-table-body');

                data.forEach(function (g) {
                    var listItem = document.createElement("div");
                    listItem.classList.add(
                        "gym-item",
                        "cursor-pointer",
                        "p-4", "mb-2",
                        "border",
                        "border-gray-300",
                        "rounded-lg",
                        "bg-gray-100",
                        "hover:bg-gray-200",
                        "flex", "flex-col",
                        "items-start",
                        "transition-colors",
                        "duration-300");

                    var content = `
                        <div class="template-item bg-white shadow-md rounded-lg p-4 mb-4">
                            <div class="template-name text-lg font-bold mb-2 text-orange-700">${g.template_name}</div>
                            <div class="template-description text-gray-700">${g.description}</div>
                        </div>
                        `;

                    listItem.innerHTML = content;
                    document.getElementById("templatesList").appendChild(listItem);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
    </script>
</body>

</html>
``