<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trainer Profile</title>
    <link rel="stylesheet" href="../../dist/tailwind.css">
    <link
        href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/frontend/scripts/auth.js"></script>
</head>

<body class="bg-[#1E1E1E] font-[Poppins] text-white">
    <header class="fixed h-[95px] w-full flex bg-guestNavbar justify-between items-center drop-shadow-md z-20 px-4">
        <div class="relative flex-1">
            <img class="w-full max-w-[450px] mix-blend-overlay" src="../../views/img/nav_img.png"
                alt="Background Image">
        </div>
        <div class="absolute left-4 top-4 md:left-20 h-16 w-16 text-xl">
            <b
                class="text-2xl bg-gradient-to-r from-white to-forGradientWhite text-transparent bg-clip-text">FLEXPERIENCE</b>
        </div>
        <div class="pl-5 pr-10 text-50">
            <button onclick="window.location.href='../../views/Landing page/signup.html'"
                class="inline-block border border-[#343639] rounded-full px-5 py-2 hover:bg-50 hover:text-white duration-300">
                Register Now
            </button>
        </div>
    </header>


    <!--profile-->
    <section class="relative pt-40 pb-11">
        <img src="../../img/Black White Modern Hello Everybody Twitter Header.svg" alt="Flexperience Cover"
            class="w-full absolute top-0 left-0 z-10 h-60 object-cover shadow-inner">
        <div class="w-full max-w-7xl mx-auto px-6 md:px-8">
            <div class="flex items-center justify-center sm:justify-start relative z-10 mb-5">
                <img src="../../img/heinzprof.jpg" alt="user-avatar-image"
                    class="border-4 w-[150px] h-[150px] border-solid border-white rounded-full object-cover">
            </div>
            <div class="flex items-center justify-center flex-col sm:flex-row max-sm:gap-5 sm:justify-between mb-5">
                <div class="block">
                    <h3 id="trainerName" class="font-manrope font-semibold text-xl mb-1 max-sm:text-center">Heinz
                        Padilla</h3>
                    <p class="font-normal text-[14px] leading-7 max-sm:text-center">Trainer <br
                            class="hidden sm:block">Davao City</p>
                </div>
                <button
                    class="py-3.5 px-5 flex rounded-full bg-orange-600 items-center shadow-sm shadow-transparent transition-all duration-500 hover:bg-orange-700">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.3011 8.69881L8.17808 11.8219M8.62402 12.5906L8.79264 12.8819C10.3882 15.6378 11.1859 17.0157 12.2575 16.9066C13.3291 16.7974 13.8326 15.2869 14.8397 12.2658L16.2842 7.93214C17.2041 5.17249 17.6641 3.79266 16.9357 3.0643C16.2073 2.33594 14.8275 2.79588 12.0679 3.71577L7.73416 5.16033C4.71311 6.16735 3.20259 6.67086 3.09342 7.74246C2.98425 8.81406 4.36221 9.61183 7.11813 11.2074L7.40938 11.376C7.79182 11.5974 7.98303 11.7081 8.13747 11.8625C8.29191 12.017 8.40261 12.2082 8.62402 12.5906Z"
                            stroke="white" stroke-width="1.6" stroke-linecap="round" />
                    </svg>
                    <span class="px-2 font-semibold text-base leading-7 text-white">Send Message</span>
                </button>
            </div>
            <div class="flex max-sm:flex-wrap max-sm:justify-center items-center gap-4">
                <a href="#about"
                    class="rounded-full py-3 px-6 bg-stone-100 text-gray-700 font-semibold text-sm leading-6 transition-all duration-500 hover:bg-stone-200 hover:text-gray-900">About
                    trainer</a>
                <a href="#workout-plan"
                    class="rounded-full py-3 px-6 bg-stone-100 text-gray-700 font-semibold text-sm leading-6 transition-all duration-500 hover:bg-stone-200 hover:text-gray-900">Workout
                    plan</a>
                <a href="#meal-plan"
                    class="rounded-full py-3 px-6 bg-stone-100 text-gray-700 font-semibold text-sm leading-6 transition-all duration-500 hover:bg-stone-200 hover:text-gray-900">Meal
                    plan</a>
            </div>
        </div>
    </section>
    <!--content-->
    <!--About-->
    <div id="about" class="content-div bg-customBodyColor overflow-hidden shadow-lg rounded-lg p-6 text-white">
        <!-- Container for the two sections -->
        <div class="flex">
            <!-- Section 1: Trainer Introduction -->
            <div class="w-1/2 pr-6">
                <h3 class="text-2xl font-semibold">
                    Trainer Information
                </h3>
                <p id="trainerBio" class="mt-2 text-gray-300">
                    <!-- Bio will be populated dynamically using JavaScript -->
                </p>
            </div>

            <!-- Section 2: Personal Information -->
            <div class="w-1/2">
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <span class="text-sm font-medium w-32 text-gray-400">
                            Full name
                        </span>
                        <span id="fullName" class="text-base font-normal text-gray-100">
                            <!-- Full name will be populated dynamically -->
                        </span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm font-medium w-32 text-gray-400">
                            Trainer type
                        </span>
                        <span id="trainerType" class="text-base font-normal text-gray-100">
                            <!-- Trainer type will be populated dynamically -->
                        </span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm font-medium w-32 text-gray-400">
                            Rates
                        </span>
                        <span id="rates" class="text-base font-normal text-gray-100">
                            <!-- Rates will be populated dynamically -->
                        </span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm font-medium w-32 text-gray-400">
                            Experience
                        </span>
                        <span id="experience" class="text-base font-normal text-gray-100 leading-tight">
                            <!-- Experience will be populated dynamically -->
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!--workoutplan-->
    <!--grid-->
    <div id="workout-plan"
        class="content-div grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 text-center justify-center gap-4 mt-3 ml-6 hidden">
    </div>

    <!--mealplan-->
    <!--grid-->
    <div id="meal-plan"
        class="content-div grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 text-center justify-center gap-4 mt-3 ml-6 hidden">
        <div
            class="relative flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md">
            <a class="relative mx-3 mt-3 flex h-30 overflow-hidden rounded-xl" href="#">
                <img class="object-cover w-full h-40"
                    src="https://media.self.com/photos/5a316fd183ab3f54feacf768/4:3/w_2560%2Cc_limit/Roasted-pork.jpg"
                    alt="mealplan image" />
            </a>
            <div class="mt-4 px-5 pb-5">
                <a href="#">
                    <h5 class="text-xl tracking-tight text-slate-900">Tabemono</h5>
                </a>
                <div class="mt-2 mb-5 flex items-center justify-center">
                    <p>Meal Plan</p>
                </div>
                <a href="#"
                    class="flex items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300">
                    View template
                </a>
            </div>
        </div>
        <div
            class="relative flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md">
            <a class="relative mx-3 mt-3 flex h-30 overflow-hidden rounded-xl" href="#">
                <img class="object-cover w-full h-40"
                    src="https://images.immediate.co.uk/production/volatile/sites/30/2022/03/Sesame-salmon-purple-sprouting-broccoli-sweet-potato-mash-02-8062a36.jpg?quality=90&resize=556,505"
                    alt="mealplan image" />
            </a>
            <div class="mt-4 px-5 pb-5">
                <a href="#">
                    <h5 class="text-xl tracking-tight text-slate-900">Pagkain</h5>
                </a>
                <div class="mt-2 mb-5 flex items-center justify-center">
                    <p>Meal Plan</p>
                </div>
                <a href="#"
                    class="flex items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300">
                    View template
                </a>
            </div>
        </div>
        <div
            class="relative flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md">
            <a class="relative mx-3 mt-3 flex h-30 overflow-hidden rounded-xl" href="#">
                <img class="object-cover w-full h-40"
                    src="https://i.pinimg.com/736x/df/cc/10/dfcc10d397fc5e40073772e6e15c62dc.jpg"
                    alt="mealplan image" />
            </a>
            <div class="mt-4 px-5 pb-5">
                <a href="#">
                    <h5 class="text-xl tracking-tight text-slate-900">Food</h5>
                </a>
                <div class="mt-2 mb-5 flex items-center justify-center">
                    <p>Meal Plan</p>
                </div>
                <a href="#"
                    class="flex items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300">
                    View template
                </a>
            </div>
        </div>
    </div>


    <script>
        const aboutButton = document.querySelector('a[href="#about"]');
        const workoutButton = document.querySelector('a[href="#workout-plan"]');
        const mealButton = document.querySelector('a[href="#meal-plan"]');
        const contentDivs = document.querySelectorAll('.content-div');
        const trainerid = getCookie('trainer_id')


        window.onload = function () {
            fetchAndDisplayTrainerData(trainerid);
            fetchAndDisplayWorkoutTemplates(trainerid)
        };

        function showDiv(divToShow) {
            contentDivs.forEach(div => {
                div.style.display = div.id === divToShow ? 'grid' : 'none'; // Use 'grid' for the visible div
            });

            // Reset button styles
            aboutButton.classList.remove('bg-stone-500', 'text-white');
            workoutButton.classList.remove('bg-stone-500', 'text-white');
            mealButton.classList.remove('bg-stone-500', 'text-white');

            // Highlight the active button
            if (divToShow === 'about') {
                aboutButton.classList.add('bg-stone-500', 'text-white');
            } else if (divToShow === 'workout-plan') {
                workoutButton.classList.add('bg-stone-500', 'text-white');
            } else {
                mealButton.classList.add('bg-stone-500', 'text-white');
            }
        }

        async function fetchAndDisplayTrainerData(trainerId) {
            try {
                // Fetch trainer data from the backend
                const response = await axios.get(`http://localhost:3000/getGymTrainerById?trainer_id=${trainerId}`);
                const trainer = response.data[0]; // Assuming the response returns an array of trainer data

                // Update Trainer Introduction
                const trainerBioElement = document.querySelector('#trainerBio');
                trainerBioElement.innerText = `Meet ${trainer.firstname} ${trainer.lastname}, ${trainer.bio}`;

                const TrainerNameElement = document.querySelector('#trainerName');
                TrainerNameElement.innerText = `${trainer.firstname} ${trainer.lastname}`;

                // Update Full Name
                const fullNameElement = document.querySelector('#fullName');
                fullNameElement.innerText = `${trainer.firstname} ${trainer.lastname}`;

                // Update Trainer Type
                const trainerTypeElement = document.querySelector('#trainerType');
                trainerTypeElement.innerText = trainer.trainer_type;

                // Update Rates
                const ratesElement = document.querySelector('#rates');
                ratesElement.innerText = `${trainer.rates} pesos`;

                // Update Experience
                const experienceElement = document.querySelector('#experience');
                experienceElement.innerText = `${trainer.experience} years`;
            } catch (error) {
                console.error('Error fetching trainer data:', error);
            }
        }

        // Function to fetch and display workout templates based on trainer ID
        function fetchAndDisplayWorkoutTemplates(trainerId) {
            axios.get(`http://localhost:3000/getTemplates?trainer_id=${trainerId}`)
                .then(response => {
                    // Assuming the response data is an array of templates
                    const templates = response.data;

                    // Select the container div where templates will be displayed
                    const workoutPlanContainer = document.getElementById('workout-plan');

                    // Clear any existing content inside the container
                    workoutPlanContainer.innerHTML = '';

                    // Iterate over the templates array and create cards dynamically
                    templates.forEach(template => {
                        // Create a card for each template
                        const card = `
                    <div class="relative flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md">
                        <a class="relative mx-3 mt-3 flex h-30 overflow-hidden rounded-xl" href="#">
                            <img class="object-cover w-full h-40"
                                src="../img/pexels-823sl-2294361.jpg" alt="workout image"
                                alt="workout image" />
                        </a>
                        <div class="mt-4 px-5 pb-5">
                            <a href="#">
                                <h5 class="text-xl tracking-tight text-slate-900">${template.template_name}</h5>
                            </a>
                            <div class="mt-2 mb-5 flex items-center text-black justify-center">
                                <p>${template.description}</p>
                            </div>
                            <a href="#"
                                class="flex items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300">
                                View template
                            </a>
                        </div>
                    </div>
                `;
                        // Append each card to the container
                        workoutPlanContainer.innerHTML += card;
                    });

                    // Remove 'hidden' class to display the container after content is added
                    workoutPlanContainer.classList.remove('hidden');
                })
                .catch(error => {
                    console.error("Error fetching workout templates:", error.message);
                });
        }


        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
        // Set default to "About" on page load
        showDiv('about');

        aboutButton.addEventListener('click', () => showDiv('about'));
        workoutButton.addEventListener('click', () => showDiv('workout-plan'));
        mealButton.addEventListener('click', () => showDiv('meal-plan'));
    </script>




</body>

</html>